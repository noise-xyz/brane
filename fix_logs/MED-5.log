# MED-5: Add timeout support to WebSocketProvider.sendAsyncBatch

## Status: ALREADY RESOLVED

## Analysis
The code review task requested adding timeout support to `WebSocketProvider.sendAsyncBatch`.
Upon investigation, this functionality is **already fully implemented**:

### Implementation Details (WebSocketProvider.java)

1. **Lines 791-793**: Overload without timeout parameter that applies default timeout internally:
   ```java
   public CompletableFuture<JsonRpcResponse> sendAsyncBatch(String method, List<?> params) {
       return sendAsyncBatch(method, params, defaultRequestTimeout);
   }
   ```

2. **Lines 810-851**: Overload with custom timeout parameter:
   ```java
   public CompletableFuture<JsonRpcResponse> sendAsyncBatch(String method, List<?> params, Duration timeout)
   ```

3. **Lines 818-832**: Timeout scheduling via Netty event loop:
   - Schedules timeout callback using `ch.eventLoop().schedule()`
   - Properly removes from pending requests on timeout
   - Reports timeout via metrics `metrics.onRequestTimeout(method, id)`
   - Throws `RpcException` with code -32000 and descriptive message

4. **Line 116**: Default timeout configured via `WebSocketConfig`:
   ```java
   private final Duration defaultRequestTimeout;
   ```

5. **Line 276**: Initialization from config:
   ```java
   this.defaultRequestTimeout = config.defaultRequestTimeout();
   ```

## Verification
- Code compiles successfully: `./gradlew :brane-rpc:compileJava` ✓
- Both requirements met:
  - ✓ "Add timeout parameter" (Line 810)
  - ✓ "OR apply default timeout internally" (Line 792)

## No Changes Required
This issue was already addressed prior to this review task.
